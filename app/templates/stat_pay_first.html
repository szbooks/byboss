{% extends 'layout/base.html' %}

{% block content %}
    <div class="content-area">
        <!-- 顶部操作栏 -->
        <div class="d-flex align-items-center flex-wrap mb-3">
            <!-- 操作按钮 -->
        </div>
        <table class="table table-striped table-bordered table-light table-hover">
            <thead>
                <tr>
                    <th>日期</th>
                    <th>首次付费公司数</th>
                    <th>首次付費公司占比</th>
                    <th>首次付费金额</th>
                    <th>首次付費金额占比</th>
                    <th>首次且按年付费公司占比（占首付）</th>
                    <th>首次且按年付费金额占比（占首付）</th>
                </tr>
            </thead>
            <tbody>
              {% for row in results %}
                <tr>
                  <td>{{ row.countday }}</td>
                  <td>{{ row.pay_first_company }} / {{ row.pay_first_company_y }}</td>
                  <td>{{ "{:.2f}".format(100 * row.pay_first_company / row.pay_company) }}%</td>
                  <td>{{ row.pay_first_value }} / {{ row.pay_first_value_y }}</td>
                  <td>{{ "{:.2f}".format(100 * row.pay_first_value / row.pay_value) }}%</td>
                  <td>{{ "{:.2f}".format(100 * row.pay_first_annual_company / row.pay_first_company) }}%</td>
                  <td>{{ "{:.2f}".format(100 * row.pay_first_annual_value / row.pay_first_value) }}%</td>
                </tr>
              {% endfor %}
            </tbody>
        </table>
         <!-- 底部分页控件 -->
        <nav aria-label="Page navigation" class="d-flex justify-content-end pagination-container">
            <ul class="pagination pagination-sm">
                <li class="page-item {% if page <= 1 %}disabled{% endif %}">
                    <a class="page-link" href="{{ url_for('main.stat_pay_first', page=page-1) }}">上一页</a>
                </li>
                {% for num in range(1, total_pages + 1) %}
                    <li class="page-item {% if num == page %}active{% endif %}">
                        <a class="page-link" href="{{ url_for('main.stat_pay_first', page=num) }}">{{ num }}</a>
                    </li>
                {% endfor %}
                <li class="page-item {% if page >= total_pages %}disabled{% endif %}">
                    <a class="page-link" href="{{ url_for('main.stat_pay_first', page=page+1) }}">下一页</a>
                </li>
            </ul>
        </nav>
    </div>
{% endblock %}
