{% extends 'layout/base.html' %}

{% block content %}
    <div class="container">
        <form action="{{ url_for('main.add_operating_sub_company') }}" method="post" id="operating_sub_Form">

            <div class="row mb-3">
                <label for="phone" class="col-sm-1 col-form-label">手机号：<span class="text-danger">*</span></label>
                <div class="col-sm-5">
                    <input type="number" class="form-control" id="phone" name="phone" required>
                    <span style="color: rosybrown">只允许输入数字哦</span>
                </div>

                <div id="company_id_feedback" class="form-text text-danger" style="margin-left: 110px;"></div>
            </div>

             <div class="row mb-3">
                <label for="phone" class="col-sm-1 col-form-label">别名：</label>
                <div class="col-sm-5">
                    <input type="tel" class="form-control" id="name" name="name" >
                </div>
            </div>

            <div class="row">
                <div class="col-sm-10 offset-sm-1">
                    <button type="submit" class="btn btn-primary me-2">提交</button>
                    <a href="{{ url_for('main.operating_sub_company') }}" class="btn btn-secondary">取消</a>
                </div>
            </div>
        </form>



    </div>


    <script>
 $(document).ready(function () {
            $('#operating_sub_Form').on('submit', function (event) {
                event.preventDefault();  // 阻止表单默认提交行为

                const formData = $(this).serialize();  // 序列化表单数据

                $.ajax({
    url: "{{ url_for('main.add_operating_sub_company') }}",
    type: 'POST',
    data: formData,
    success: function (response) {
        if (response.success) {
            {#alert('保存成功！');#}
            // 跳转到 presales_progress 页面
            window.location.href = "{{ url_for('main.operating_sub_company') }}";
        } else {
            $('#company_id_feedback').text(response.message);
        }
    },
    error: function (jqXHR, textStatus, errorThrown) {
        console.error('Error:', textStatus, errorThrown);
        alert('发生错误，请稍后再试。');
    }
});
            });
        });
 </script>
{% endblock %}
